spec:
  replicas: 1
  selector:
    matchLabels:
      name: sriov-network-operator
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
        openshift.io/required-scc: restricted-v2
        target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
      labels:
        name: sriov-network-operator
    spec:
      containers:
        - command:
            - sriov-network-operator
          env:
            - name: WATCH_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.annotations['olm.targetNamespaces']
            - name: SRIOV_CNI_IMAGE
              value: registry.redhat.io/openshift4/sriov-cni-rhel9@sha256:8381450cdd2a0078cab4a766ad23c76a771a0ef2e44177355167a565918384e6
            - name: SRIOV_DEVICE_PLUGIN_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-network-device-plugin-rhel9@sha256:10c61d2d478d295fa9c34d4bcec5fb4f0b7dfe9616160250f288524bce1494b9
            - name: NETWORK_RESOURCES_INJECTOR_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-dp-admission-controller-rhel9@sha256:37905f9a1caa7a718b6b9ed1b487a42794dc58154e974d9c61db3a793f882e70
            - name: OPERATOR_NAME
              value: sriov-network-operator
            - name: SRIOV_NETWORK_CONFIG_DAEMON_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-network-config-daemon-rhel9@sha256:a83c2e6a3a12b909cc7e10db176050da405c95e335575f46ec7bec92612a3b79
            - name: SRIOV_NETWORK_WEBHOOK_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-network-webhook-rhel9@sha256:5b5c6217267d91742131a69da783866d0ff63bf0ce6d33be5387793a848cd177
            - name: SRIOV_INFINIBAND_CNI_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-infiniband-cni-rhel9@sha256:8255c8b6cc216a38b9458f5406b2f2ca69a075d8c900f9f7e9e079597b0a44b7
            - name: RDMA_CNI_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-rdma-cni-rhel9@sha256:e83fa8dbc02f85c55355125d71064a47f914d3df5b526cb05426f62017312ece
            - name: RESOURCE_PREFIX
              value: openshift.io
            - name: ADMISSION_CONTROLLERS_ENABLED
              value: 'false'
            - name: ADMISSION_CONTROLLERS_CERTIFICATES_OPERATOR_SECRET_NAME
              value: operator-webhook-service
            - name: ADMISSION_CONTROLLERS_CERTIFICATES_INJECTOR_SECRET_NAME
              value: network-resources-injector-secret
            - name: METRICS_EXPORTER_IMAGE
              value: registry.redhat.io/openshift4/ose-sriov-network-metrics-exporter-rhel9@sha256:451ce2eb1943ced28af4e54cd2f741926c648a39ebcf6ede44eb393a41d5cdfb
            - name: METRICS_EXPORTER_KUBE_RBAC_PROXY_IMAGE
              value: registry.redhat.io/openshift4/ose-kube-rbac-proxy-rhel9@sha256:8d488cbcd2b21e132975a19b4d8dd3bcc3cba5e54ba8edcdf113a04d126b3874
            - name: METRICS_EXPORTER_SECRET_NAME
              value: metrics-exporter-cert
            - name: METRICS_EXPORTER_PROMETHEUS_OPERATOR_ENABLED
              value: 'false'
            - name: METRICS_EXPORTER_PROMETHEUS_DEPLOY_RULES
              value: 'true'
            - name: METRICS_EXPORTER_PROMETHEUS_OPERATOR_NAMESPACE
              value: openshift-monitoring
            - name: METRICS_EXPORTER_PROMETHEUS_OPERATOR_SERVICE_ACCOUNT
              value: prometheus-k8s
            - name: METRICS_EXPORTER_PORT
              value: '9110'
            - name: NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: NODE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: RELEASE_VERSION
              value: 4.20.0
            - name: SRIOV_CNI_BIN_PATH
              value: /run/cni/bin
            - name: CLUSTER_TYPE
              value: kubernetes
          image: registry.redhat.io/openshift4/ose-sriov-network-rhel9-operator@sha256:8845282b51c1de1e90e79791c27c5169226665ba66d34f66dc0533f9fb238dc6
          imagePullPolicy: IfNotPresent
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8081
            initialDelaySeconds: 15
            periodSeconds: 20
          name: sriov-network-operator
          readinessProbe:
            httpGet:
              path: /readyz
              port: 8081
            initialDelaySeconds: 5
            periodSeconds: 10
          resources: {}
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
      nodeSelector:
        node-role.kubernetes.io/master: ''
      serviceAccountName: sriov-network-operator
      tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sriov-network-operator
  namespace: sriov-network-operator
